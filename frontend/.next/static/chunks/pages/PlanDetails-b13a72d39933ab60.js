(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[447],{1131:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(7812),a=r(1163),s=r(6835),i=r(29),l=r(4687),c=r.n(l),o=r(7294),u=r(1664),d=r.n(u),m=r(2364),h=function(e){var t=e.planId,r=(0,o.useState)(null),a=r[0],l=r[1],u=(0,o.useState)([]),h=u[0],p=u[1],f=(0,o.useState)(!0),v=f[0],y=f[1],b=(0,o.useState)(null),g=b[0],N=b[1];return((0,o.useEffect)(function(){var e;(e=(0,i.Z)(c().mark(function e(){var r,n,a,i,o,u;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([fetch("/api/plans/".concat(t)),fetch("/api/plans/".concat(t,"/evolution"))]);case 3:if(r=e.sent,a=(n=(0,s.Z)(r,2))[0],i=n[1],!(!a.ok||!i.ok)){e.next=9;break}throw Error("Failed to load plan data");case 9:return e.next=11,a.json();case 11:return o=e.sent,e.next=14,i.json();case 14:u=e.sent,l(o),p(u.evolution_history||[]),N(null),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Plan load error:",e.t0),N(e.t0.message);case 24:return e.prev=24,y(!1),e.finish(24);case 27:case"end":return e.stop()}},e,null,[[0,20,24,27]])})),function(){return e.apply(this,arguments)})()},[t]),v)?(0,m.tZ)("div",{className:"p-4 space-y-4",children:(0,m.BX)("div",{className:"animate-pulse space-y-4",children:[(0,m.tZ)("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),(0,m.tZ)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,m.tZ)("div",{className:"space-y-2",children:(0,n.Z)([,,,]).map(function(e,t){return(0,m.tZ)("div",{className:"h-12 bg-gray-100 rounded-lg"},t)})})]})}):g?(0,m.BX)("div",{className:"p-4 text-red-600",children:["Error loading plan: ",g]}):(0,m.BX)("div",{className:"plan-timeline p-4 bg-white rounded-lg shadow",children:[(0,m.BX)("div",{className:"mb-6",children:[(0,m.BX)("h2",{className:"text-2xl font-semibold",children:[a.jsonb_plan.overview.focus," Training Plan"]}),(0,m.BX)("p",{className:"text-gray-600",children:[a.jsonb_plan.overview.duration_weeks," weeks •"," ",a.jsonb_plan.overview.total_weekly_hours," hours/week"]})]}),(0,m.tZ)("div",{className:"space-y-8",children:a.jsonb_plan.weeks.map(function(e,t){return(0,m.BX)("div",{className:"relative pl-6 border-l-2 border-gray-200",children:[(0,m.tZ)("div",{className:"absolute w-4 h-4 bg-blue-500 rounded-full -left-[9px] top-0"}),(0,m.BX)("div",{className:"mb-2",children:[(0,m.BX)("h3",{className:"text-lg font-semibold",children:["Week ",e.week_number]}),(0,m.tZ)("p",{className:"text-gray-600",children:e.focus})]}),(0,m.tZ)("div",{className:"space-y-4",children:e.workouts.map(function(e,t){return(0,m.tZ)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,m.BX)("div",{className:"flex justify-between items-start",children:[(0,m.BX)("div",{children:[(0,m.tZ)("h4",{className:"font-medium",children:e.type.replace(/_/g," ")}),(0,m.tZ)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,m.BX)("div",{className:"text-right",children:[(0,m.BX)("p",{className:"text-gray-900",children:[e.duration_minutes," minutes"]}),(0,m.tZ)("p",{className:"text-sm text-gray-500 capitalize",children:e.intensity})]})]})},t)})})]},t)})}),h.length>0&&(0,m.BX)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,m.tZ)("h3",{className:"text-lg font-semibold mb-4",children:"Version History"}),(0,m.tZ)("div",{className:"space-y-4",children:h.map(function(e,t){return(0,m.tZ)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,m.BX)("div",{className:"flex justify-between items-start",children:[(0,m.BX)("div",{children:[(0,m.BX)("h4",{className:"font-medium",children:["Version ",e.version]}),(0,m.tZ)("p",{className:"text-sm text-gray-600",children:new Date(e.created_at).toLocaleDateString()}),e.changes_summary&&(0,m.tZ)("p",{className:"text-sm mt-2 text-gray-600",children:e.changes_summary})]}),(0,m.tZ)(d(),{href:"/plans/".concat(e.parent_plan_id),className:"text-blue-500 hover:text-blue-700 text-sm",children:"View →"})]})},t)})})]})]})},p=function(){var e=(0,a.useRouter)().query.planId;return e?(0,m.tZ)("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:(0,m.tZ)("div",{className:"max-w-4xl mx-auto",children:(0,m.tZ)(h,{planId:e})})}):(0,m.tZ)("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:(0,m.tZ)("div",{className:"max-w-4xl mx-auto",children:(0,m.tZ)("div",{className:"p-4 space-y-4",children:(0,m.BX)("div",{className:"animate-pulse space-y-4",children:[(0,m.tZ)("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),(0,m.tZ)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,m.tZ)("div",{className:"space-y-2",children:(0,n.Z)([,,,]).map(function(e,t){return(0,m.tZ)("div",{className:"h-12 bg-gray-100 rounded-lg"},t)})})]})})})})}},817:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/PlanDetails",function(){return r(1131)}])},1163:function(e,t,r){e.exports=r(8194)},2587:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:function(){return n}})},6835:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2937);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,l=[],c=!0,o=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(o)throw a}}return l}}(e,t)||(0,n.Z)(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},7812:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(2587),a=r(2937);function s(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2937:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2587);function a(e,t){if(e){if("string"==typeof e)return(0,n.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return(0,n.Z)(e,t)}}}},function(e){e.O(0,[290,664,888,774,179],function(){return e(e.s=817)}),_N_E=e.O()}]);