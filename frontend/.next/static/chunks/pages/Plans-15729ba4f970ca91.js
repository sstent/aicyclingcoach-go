(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[393],{889:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(8307),i=n(29),o=n(4687),a=n.n(o),l=n(7294),s=n(263),u=n(7066),c=n(2364),d=function(e){var t,n=e.workout,r=e.onEdit,i=e.editable;return(0,c.BX)("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:[(0,c.BX)("div",{className:"flex justify-between items-start mb-2",children:[(0,c.tZ)("h5",{className:"font-medium capitalize",children:(null==n||null===(t=n.type)||void 0===t?void 0:t.replace("_"," "))||"Workout"}),i&&(0,c.tZ)("button",{onClick:r,className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"})]}),(0,c.BX)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,c.BX)("div",{children:["Duration: ",(null==n?void 0:n.duration_minutes)||0," minutes"]}),(0,c.BX)("div",{children:["Intensity: ",(null==n?void 0:n.intensity)||"N/A"]}),(null==n?void 0:n.description)&&(0,c.tZ)("div",{className:"mt-2 text-gray-700",children:n.description})]})]})};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}d.defaultProps={workout:{},onEdit:function(){},editable:!1};var m=function(e){var t=e.workout,n=e.onClose,i=e.onSave,o=(0,l.useState)({type:"",duration_minutes:0,intensity:"",description:""}),a=o[0],s=o[1];(0,l.useEffect)(function(){t&&s({type:t.type||"",duration_minutes:t.duration_minutes||0,intensity:t.intensity||"",description:t.description||""})},[t]);var u=function(e){var t=e.target,n=t.name,i=t.value;s(function(e){return p(p({},e),{},(0,r.Z)({},n,i))})};return t?(0,c.tZ)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,c.BX)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,c.tZ)("h3",{className:"text-lg font-semibold mb-4",children:"Edit Workout"}),(0,c.BX)("form",{onSubmit:function(e){e.preventDefault(),i(a)},children:[(0,c.BX)("div",{className:"space-y-4",children:[(0,c.BX)("div",{children:[(0,c.tZ)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workout Type"}),(0,c.tZ)("input",{type:"text",name:"type",value:a.type,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.BX)("div",{children:[(0,c.tZ)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),(0,c.tZ)("input",{type:"number",name:"duration_minutes",value:a.duration_minutes,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.BX)("div",{children:[(0,c.tZ)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intensity"}),(0,c.BX)("select",{name:"intensity",value:a.intensity,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,c.tZ)("option",{value:"",children:"Select intensity"}),(0,c.tZ)("option",{value:"zone_1",children:"Zone 1 (Easy)"}),(0,c.tZ)("option",{value:"zone_2",children:"Zone 2 (Moderate)"}),(0,c.tZ)("option",{value:"zone_3",children:"Zone 3 (Tempo)"}),(0,c.tZ)("option",{value:"zone_4",children:"Zone 4 (Threshold)"}),(0,c.tZ)("option",{value:"zone_5",children:"Zone 5 (VO2 Max)"})]})]}),(0,c.BX)("div",{children:[(0,c.tZ)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,c.tZ)("textarea",{name:"description",value:a.description,onChange:u,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,c.BX)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,c.tZ)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,c.tZ)("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Save"})]})]})]})}):null};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}m.defaultProps={workout:null};var h=function(e){var t,n,o,f,p,h=e.plan,b=e.mode,y=void 0===b?"view":b,g=(0,s.a)().apiKey,w=(0,l.useState)(null==h?void 0:h.jsonb_plan),x=w[0],N=w[1],k=(0,l.useState)(!1),Z=k[0],O=k[1],E=(0,l.useState)(null),_=E[0],P=E[1],X=(0,l.useState)(0),j=X[0],B=X[1],S=(t=(0,i.Z)(a().mark(function e(t){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},x)).weeks[j].workouts=n.weeks[j].workouts.map(function(e){return e.day===t.day?t:e}),"edit"!==y){e.next=6;break}return e.next=6,u.Z.put("/api/plans/".concat(h.id),n,{headers:{"X-API-Key":g}});case 6:N(n),O(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error updating workout:",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),function(e){return t.apply(this,arguments)});return(0,c.BX)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,c.BX)("div",{className:"flex items-center justify-between mb-6",children:[(0,c.BX)("h3",{className:"text-xl font-semibold",children:[null==x||null===(n=x.plan_overview)||void 0===n?void 0:n.focus," Training Plan"]}),(0,c.BX)("div",{className:"text-gray-600",children:[null==x||null===(o=x.plan_overview)||void 0===o?void 0:o.duration_weeks," weeks â€¢",null==x||null===(f=x.plan_overview)||void 0===f?void 0:f.weekly_hours," hrs/week"]})]}),(0,c.tZ)("div",{className:"space-y-8",children:null==x||null===(p=x.weeks)||void 0===p?void 0:p.map(function(e,t){return(0,c.BX)("div",{className:"border-l-2 border-blue-100 pl-4",children:[(0,c.BX)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.BX)("h4",{className:"font-medium",children:["Week ",t+1,": ",e.focus]}),(0,c.BX)("div",{className:"flex items-center space-x-2",children:[(0,c.tZ)("div",{className:"h-2 w-24 bg-gray-200 rounded-full",children:(0,c.tZ)("div",{className:"h-full bg-blue-600 rounded-full",style:{width:"".concat((t+1)/x.plan_overview.duration_weeks*100,"%")}})}),(0,c.BX)("span",{className:"text-sm text-gray-600",children:[e.workouts.length," workouts"]})]})]}),(0,c.tZ)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.workouts.map(function(e,n){return(0,c.tZ)(d,{workout:e,onEdit:function(){B(t),P(e),O(!0)},editable:"edit"===y},"".concat(t,"-").concat(n))})})]},t)})}),Z&&(0,c.tZ)(m,{workout:_,onClose:function(){return O(!1)},onSave:S})]})}},263:function(e,t,n){"use strict";n.d(t,{a:function(){return o}}),n(4687);var r=n(7294);n(5678),n(3454);var i=(0,r.createContext)(),o=function(){var e=(0,r.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},1749:function(e,t,n){"use strict";n.r(t);var r=n(29),i=n(4687),o=n.n(i),a=n(7294),l=n(7066),s=n(263),u=n(889),c=n(2364);t.default=function(){var e=(0,s.a)().apiKey,t=(0,a.useState)([]),n=t[0],i=t[1],d=(0,a.useState)(null),f=d[0],p=d[1],m=(0,a.useState)(!0),v=m[0],h=m[1],b=(0,a.useState)(""),y=b[0],g=b[1];return((0,a.useEffect)(function(){var t;(t=(0,r.Z)(o().mark(function t(){var n;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.Z.get("/api/plans",{headers:{"X-API-Key":e}});case 3:i((n=t.sent).data),n.data.length>0&&p(n.data[0].id),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),g("Failed to load training plans");case 11:return t.prev=11,h(!1),t.finish(11);case 14:case"end":return t.stop()}},t,null,[[0,8,11,14]])})),function(){return t.apply(this,arguments)})()},[e]),v)?(0,c.tZ)("div",{className:"p-6 text-center",children:"Loading plans..."}):y?(0,c.tZ)("div",{className:"p-6 text-red-600",children:y}):(0,c.BX)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,c.tZ)("h1",{className:"text-3xl font-bold mb-8",children:"Training Plans"}),(0,c.BX)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,c.tZ)("div",{className:"space-y-4",children:n.map(function(e){return(0,c.BX)("div",{onClick:function(){return p(e.id)},className:"p-4 bg-white rounded-lg shadow-md cursor-pointer ".concat(f===e.id?"ring-2 ring-blue-500":""),children:[(0,c.BX)("h3",{className:"font-medium",children:["Plan v",e.version]}),(0,c.BX)("p",{className:"text-sm text-gray-600",children:["Created ",new Date(e.created_at).toLocaleDateString()]})]},e.id)})}),(0,c.tZ)("div",{className:"lg:col-span-2",children:f&&(0,c.tZ)(u.Z,{planId:f})})]})]})}},1935:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Plans",function(){return n(1749)}])},8307:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){var i;return i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===r(i)?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return i}})},5678:function(e,t,n){"use strict";var r=n(7294);let i=e=>"number"==typeof e&&!isNaN(e),o=e=>"string"==typeof e,a=e=>"function"==typeof e,l=e=>(0,r.isValidElement)(e)||o(e)||a(e)||i(e);function s(e){let{enter:t,exit:n,appendPosition:i=!1,collapse:o=!0,collapseDuration:a=300}=e;return function(e){let{children:l,position:s,preventExitTransition:u,done:c,nodeRef:d,isIn:f,playToast:p}=e,m=i?`${t}--${s}`:t,v=i?`${n}--${s}`:n,h=(0,r.useRef)(0);return(0,r.useLayoutEffect)(()=>{let e=d.current,t=m.split(" "),n=r=>{r.target===d.current&&(p(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===h.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),(0,r.useEffect)(()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),o?function(e,t,n){void 0===n&&(n=300);let{scrollHeight:r,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}(e,c,a):c()};f||(u?t():(h.current=1,e.className+=` ${v}`,e.addEventListener("animationend",t)))},[f]),r.createElement(r.Fragment,null,l)}}let u=new Map,c=[],d=new Set,f=()=>u.size>0;function p(e,t){u.forEach(n=>{null!=t&&null!=t&&t.containerId?(null==t?void 0:t.containerId)===n.id&&n.toggle(e,null==t?void 0:t.id):n.toggle(e,null==t?void 0:t.id)})}let m=1,v=()=>""+m++;function h(e,t){return l(e)&&(f()||c.push({content:e,options:t}),u.forEach(n=>{n.buildToast(e,t)})),t.toastId}function b(e,t){return{...t,type:t&&t.type||e,toastId:t&&(o(t.toastId)||i(t.toastId))?t.toastId:v()}}function y(e){return(t,n)=>h(t,b(e,n))}function g(e,t){return h(e,b("default",t))}g.loading=(e,t)=>h(e,b("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),g.promise=function(e,t,n){let r,{pending:i,error:l,success:s}=t;i&&(r=o(i)?g.loading(i,n):g.loading(i.render,{...n,...i}));let u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(e,t,i)=>{if(null==t)return void g.dismiss(r);let a={type:e,...u,...n,data:i},l=o(t)?{render:t}:t;return r?g.update(r,{...a,...l}):g(l.render,{...a,...l}),i},d=a(e)?e():e;return d.then(e=>c("success",s,e)).catch(e=>c("error",l,e)),d},g.success=y("success"),g.info=y("info"),g.error=y("error"),g.warning=y("warning"),g.warn=g.warning,g.dark=(e,t)=>h(e,b("default",{theme:"dark",...t})),g.dismiss=function(e){!function(e){var t;if(f()){if(null==e||o(t=e)||i(t))u.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=u.get(e.containerId);t?t.removeToast(e.id):u.forEach(t=>{t.removeToast(e.id)})}}else c=c.filter(t=>null!=e&&t.options.toastId!==e)}(e)},g.clearWaitingQueue=function(e){void 0===e&&(e={}),u.forEach(t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()})},g.isActive=function(e,t){var n;if(t)return!(null==(n=u.get(t))||!n.isToastActive(e));let r=!1;return u.forEach(t=>{t.isToastActive(e)&&(r=!0)}),r},g.update=function(e,t){void 0===t&&(t={});let n=((e,t)=>{var n;let{containerId:r}=t;return null==(n=u.get(r||1))?void 0:n.toasts.get(e)})(e,t);if(n){let{props:r,content:i}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:v()};o.toastId!==e&&(o.staleId=e);let a=o.render||i;delete o.render,h(a,o)}},g.done=e=>{g.update(e,{progress:1})},g.onChange=function(e){return d.add(e),()=>{d.delete(e)}},g.play=e=>p(!0,e),g.pause=e=>p(!1,e),"undefined"!=typeof window?r.useLayoutEffect:r.useEffect;let w=function(e,t){return void 0===t&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}};s(w("bounce",!0)),s(w("slide",!0)),s(w("zoom")),s(w("flip"))}},function(e){e.O(0,[290,66,888,774,179],function(){return e(e.s=1935)}),_N_E=e.O()}]);